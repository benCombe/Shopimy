<div id="main" class="center-spaced">
  <div id="shopimy-logo" routerLink="">Shopimy</div>

  <div id="nav-wrapper" class="center" [ngClass]="{ 'mobile-menu': isMobileMenuOpen }">

    <!-- Navigation Items -->
    <div id="dropdown" class="dropdown" *ngIf="!isMobile">
      <div class="dropdown-header" (click)="toggleDropdown()">
        Resources <i class="fa-solid fa-angle-down"></i>
      </div>
      <ul class="dropdown-options" [ngClass]="{ 'show': isDropdownOpen }">
        <li *ngFor="let option of options" class="opt" [routerLink]="option.link" (click)="closeDropdown()">
          {{ option.label }}
        </li>
      </ul>
    </div>

    <div *ngIf="!isLoggedIn" id="login-btn" routerLink="/login">Log In</div>
    
    <!-- User Menu for logged in users -->
    <div *ngIf="isLoggedIn" id="user-menu" class="dropdown">
      <div class="dropdown-header" (click)="toggleUserMenu()">
        My Account <i class="fa-solid fa-angle-down"></i>
      </div>
      <ul class="dropdown-options" [ngClass]="{ 'show': isUserMenuOpen }">
        <li class="opt" routerLink="/profile">Profile</li>
        <li class="opt" (click)="logout()">Logout</li>
      </ul>
    </div>

    <!-- Hamburger Menu Button -->
    <div id="hamburger" (click)="toggleMobileMenu()" *ngIf="isMobile">
      <i class="fa-solid" [ngClass]="{'fa-bars': !isMobileMenuOpen, 'fa-xmark': isMobileMenuOpen}"></i>
    </div>
  </div>
</div>

<!-- Mobile Menu Overlay -->
<div class="mobile-menu-overlay" [class.active]="isMobileMenuOpen" (click)="closeMobileMenu()"></div>

<!-- Mobile Menu Dropdown -->
<div id="mobile-menu" [class.show-mobile-menu]="isMobileMenuOpen">
  <div class="mobile-menu-header">Resources</div>
  <ul>
    <li *ngFor="let option of options" class="opt" [routerLink]="option.link" (click)="navigateAndCloseMenu(option.link)">
      {{ option.label }}
    </li>
  </ul>
  <div class="mobile-menu-divider"></div>
  <ul *ngIf="!isLoggedIn">
    <li class="opt" routerLink="/login" (click)="navigateAndCloseMenu('/login')">
      <i class="fa-solid fa-sign-in-alt"></i> Log In
    </li>
  </ul>
  <ul *ngIf="isLoggedIn">
    <li class="opt" routerLink="/profile" (click)="navigateAndCloseMenu('/profile')">
      <i class="fa-solid fa-user"></i> Profile
    </li>
    <li class="opt" (click)="logout(); closeMobileMenu()">
      <i class="fa-solid fa-sign-out-alt"></i> Logout
    </li>
  </ul>
</div>

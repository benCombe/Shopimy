<!-- Main store navigation -->
<nav id="main" class="store-nav theme-primary" [ngStyle]="{'background-color': storeDetails?.theme_1}" aria-label="Store navigation">
  <!-- Store name/logo -->
  <h1 id="store-name" class="store-title" [ngStyle]="{'color': storeDetails?.fontColor}" (click)="navigateToHome()" tabindex="0" role="button">
    {{storeDetails?.name}}
  </h1>
  
  <!-- Categories and cart wrapper -->
  <div id="categories-wrapper" class="nav-container">
    <!-- Categories section -->
    <ul id="categories" class="category-list" [ngStyle]="{'color': storeDetails?.fontColor}" *ngIf="categories && categories.length">
      <li *ngFor="let c of categories" class="category-item">
        <span class="category-link" (click)="navigateToCategory(c.name)" role="button" tabindex="0" 
              [attr.aria-haspopup]="c.subCategories && c.subCategories.length">
          {{ c.name }}
        </span>
        <ul class="dropdown theme-tertiary" *ngIf="c.subCategories && c.subCategories.length" 
            [attr.aria-label]="'Subcategories for ' + c.name">
          <li *ngFor="let sub of c.subCategories" class="subcategory-item"
              [ngStyle]="{'background-color': hoverStates[sub.categoryId] ? '#F1F1F1': storeDetails?.theme_1, 
                         'color': hoverStates[sub.categoryId] ? storeDetails?.theme_1: storeDetails?.fontColor}"
              (mouseenter)="setHover(sub.categoryId, true)"
              (mouseleave)="setHover(sub.categoryId, false)"
              (click)="navigateToCategory(sub.name)"
              role="button"
              tabindex="0">
            {{ sub.name }}
          </li>
        </ul>
      </li>
    </ul>

    <!-- Shopping cart button -->
    <div id="cart-btn-wrapper" class="cart-container">
      <div id="num-item-indicator" class="cart-badge" *ngIf="numCartItems > 0" 
           [attr.aria-label]="numCartItems + ' items in cart'">{{numCartItems}}</div>
      <button id="cart-btn" class="cart-button" [ngStyle]="{'color': storeDetails?.fontColor}" 
              (click)="navigateToCart()" aria-label="View shopping cart" 
              (keydown.enter)="navigateToCart()" (keydown.space)="navigateToCart()">
        <i class="fa-solid fa-cart-shopping" aria-hidden="true"></i>
        <span class="sr-only">Shopping Cart</span>
      </button>
    </div>
    
    <!-- Hamburger Menu (Shown only on small screens) -->
    <div *ngIf="isMobile" id="hamburger-menu" class="mobile-menu-container">
      <button id="menu-icon" class="menu-toggle" (click)="toggleMenu()" 
              [ngStyle]="{'color': storeDetails?.fontColor}" 
              [attr.aria-expanded]="menuOpen" aria-label="Toggle mobile menu">
        <i class="fa-solid fa-bars" aria-hidden="true"></i>
      </button>
      <nav id="mobile-dropdown" class="mobile-nav" *ngIf="menuOpen" aria-label="Mobile navigation">
        <ul class="mobile-menu-list">
          <li *ngFor="let c of categories" class="mobile-category-item">
            <span class="mobile-category-link" (click)="navigateToCategory(c.name); toggleMenu()" 
                  role="button" tabindex="0">{{ c.name }}</span>
            <ul *ngIf="c.subCategories.length" class="mobile-subcategories" 
                [attr.aria-label]="'Mobile subcategories for ' + c.name">
              <li *ngFor="let sub of c.subCategories" class="mobile-subcategory-item"
                  (click)="navigateToCategory(sub.name); toggleMenu()"
                  role="button"
                  tabindex="0">
                {{ sub.name }}
              </li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</nav>
